# API 方法详细说明

**在使用下列函数接口的时候请先在开头导入我们的API库，否则无法运行成功，即输入以下代码：**

```python
from pymycobot import UltraArmP1
```

**注意：** 若没有安装我们的API库，请参考 [README.md](../README.md) 文档进行安装。

## 1 机械臂整体运行状态

**1.1** `set_reboot()`

- **功能：** 设置机械臂开发板重启。
- **返回值：** 无

**1.2** `set_unlock()`

- **功能：** 解锁机械臂安全状态。
- **返回值：** 无

**1.3** `set_joint_disable()`	   

- **功能：** 设置机械臂关节掉使能
- **返回值：** 无

**1.4** `set_joint_enable()`

- **功能：** 设置机械臂关节使能

- **返回值：** 无

[//]: # (**1.8** `get_modify_version&#40;&#41;`)

[//]: # ()
[//]: # (- **功能：** 读取固件更正版本号)

[//]: # ()
[//]: # (- **返回值：** `int`, 更正版本号)

## 2 输入程序控制模式（MDI模式）

  > 注意：不同系列的机械臂限位有所不同，可设定姿态数值也有所不同具体可查看对应型号的参数介绍

**2.1** `get_angles_info()`

- **功能：** 获取机械臂当前角度。
- **返回值：** `list`一个浮点值的列表，表示所有关节的角度.

**2.2** `set_angle(id, degree, speed)`

- **功能：** 发送指定的单个关节运动至指定的角度
- **参数说明：**
  - `id`: 代表机械臂的关节，用数字1-4来表示。
  - `degree`: 表示关节的角度
  
      <table>
        <tr>
            <th>关节 Id</th>
            <th>范围</th>
        </tr>
        <tr>
            <td text-align: center>1</td>
            <td>-160 ~ 160</td>
        </tr>
        <tr>
            <td>2</td>
            <td>-20 ~ 80</td>
        </tr>
        <tr>
            <td>3</td>
            <td>90 ~ 170</td>
        </tr>
        <tr>
            <td>4</td>
            <td> -180 ~ 180</td>
        </tr>

    </table>

  - `speed`：表示机械臂运动的速度，范围 1~5700 。
- **返回值：** 无

**2.3** `set_angles(degrees, speed)`

- **功能：**  发送所有角度给机械臂所有关节
- **参数说明：**
  - `degrees`: (List[float])包含所有关节的角度 ,四轴机器人有四个关节，所以长度为4，表示方法为：[20,20,90, 20]
  - `speed`: 表示机械臂运动的速度，取值范围是1~5700。
- **返回值：** 无

**2.4** `get_coords_info()`

- **功能：** 获取机械臂当前坐标。
- **返回值：** `list`包含坐标的列表, `θ` 为末端的旋转角
  - 三轴：长度为 4，依次为 `[x, y, z, θ]`


**2.5** `set_coord(id,coord,speed)`

>> 注意：目前暂不支持单坐标控制

- **功能：** 发送单个坐标值给机械臂进行移动
- **参数说明：**
  - `id`:代表机械臂的坐标，范围 'X', 'Y', 'Z'。
  - `coord`: 输入您想要到达的坐标值
  
      <table>
        <tr>
            <th>坐标 Id</th>
            <th>范围</th>
        </tr>
        <tr>
            <td text-align: center>X</td>
            <td>-360 ~ 360</td>
        </tr>
        <tr>
            <td>Y</td>
            <td>-360 ~ 360</td>
        </tr>
        <tr>
            <td>Z</td>
            <td>-250 ~ 90</td>
        </tr>

      </table>

  - `speed`: 表示机械臂运动的速度，范围是1-5700 。
- **返回值：** 无

**2.6** `set_coords(coords, speed)`

- **功能：** 发送整体坐标,让机械臂头部从原来点移动到您指定点。
- **参数说明：**
  - `coords`: 
    - 三轴：[x,y,z] 的坐标值，长度为3
  - `speed`: 表示机械臂运动的速度，范围是1-5700。
- **返回值：** 无

**2.7** `get_radians_info()`

- **功能：** 获取机械臂当前弧度值。
- **返回值：** `list`包含所有关节弧度值的列表.

[//]: # (**2.8** `set_radians&#40;radians, speed&#41;`)

[//]: # ()
[//]: # (- **功能：** 发送弧度值给机械臂所有关节)

[//]: # (- **参数说明：**)

[//]: # (  - `radians`: 每个关节的弧度值列表&#40; `List[float]`&#41;)

[//]: # (  )
[//]: # (      <table>)

[//]: # (        <tr>)

[//]: # (            <th>关节 Id</th>)

[//]: # (            <th>范围</th>)

[//]: # (        </tr>)

[//]: # (        <tr>)

[//]: # (            <td text-align: center>1</td>)

[//]: # (            <td>2.6179 ~ 2.9670</td>)

[//]: # (        </tr>)

[//]: # (        <tr>)

[//]: # (            <td>2</td>)

[//]: # (            <td>-0.3490 ~ 1.5707</td>)

[//]: # (        </tr>)

[//]: # (        <tr>)

[//]: # (            <td>3</td>)

[//]: # (            <td>-0.0872 ~ 1.9198</td>)

[//]: # (        </tr>)

[//]: # (        <tr>)

[//]: # (            <td>4（配件）</td>)

[//]: # (            <td> -3.1241 ~ + 3.1241</td>)

[//]: # (        </tr>)

[//]: # (      </table>)

[//]: # ()
[//]: # (  - `speed`: 表示机械臂运动的速度，范围是0-200 &#40;单位：mm/s&#41;。)

[//]: # (- **返回值：** 无)

[//]: # ()
[//]: # (**2.9** `set_mode&#40;&#41;`)

[//]: # ()
[//]: # (- **功能：** 设置坐标模式)

[//]: # (- **参数说明：**)

[//]: # (  - `0`:绝对笛卡尔模式。)

[//]: # (  - `1`:相对笛卡尔模式。)

[//]: # (- **返回值：** 无)

[//]: # ()
[//]: # (**2.10** `sleep&#40;&#41;`)

[//]: # ()
[//]: # (- **功能：** 延迟)

[//]: # (- **参数说明：**)

[//]: # (  - `Time`: 延迟的时间&#40; `Int`类型&#41;，)

[//]: # (- **返回值：** 无)

[//]: # ()
[//]: # (**2.12** `set_init_pose&#40;&#41;`		)

[//]: # ()
[//]: # (- **功能：** 设置当前位置为某个固定位置。如[0,0,0]就把这个位置设为零点)

[//]: # (- **参数说明：**)

[//]: # (  - `coords` &#40;`list`&#41;: 机械臂所有坐标，比如[0, 0, 0])

[//]: # (  - `speed`: 表示机械臂运动的速度，范围是0-200 &#40;单位：mm/s&#41;。)

[//]: # (- **返回值：** 无)

[//]: # ()
[//]: # (**2.13** `set_pwm&#40;&#41;`			 )

[//]: # ()
[//]: # (- **功能：** 设置PWM占空比)

[//]: # (- **参数说明：** P：占空比，范围：0-255)

[//]: # (- **返回值：** 无)

[//]: # ()
[//]: # (**2.14** `set_fan_state&#40;&#41;`)

[//]: # ()
[//]: # (- **功能：** 设置风扇状态)

[//]: # (- **参数说明：** )

[//]: # (  - `0`: close)

[//]: # (  - `1`: open)

[//]: # (- **返回值：** 无)

[//]: # ()
[//]: # ()
[//]: # (**2.15** `get_switch_state&#40;&#41;`)

[//]: # ()
[//]: # (- **功能：** 获取限位开关状态)

[//]: # (- **参数说明：** )

[//]: # (  - `X`：关节三是否到达限位)

[//]: # (  - `Y`：关节二是否到达限位)

[//]: # (  - `Z`：关节一是否到达限位)

[//]: # (- **返回值：** 有)

[//]: # ()
[//]: # ()
[//]: # (**2.16** `set_speed_mode&#40;mode&#41;`)

[//]: # ()
[//]: # (- **功能：** 设置速度模式)

[//]: # (- **参数说明：** )

[//]: # (  - `0`: 匀速模式)

[//]: # (  - `2`: 加减速模式)

[//]: # (- **返回值：** 无)



[//]: # (## 3  JOG 模式和操作)

[//]: # ()
[//]: # (**3.1** `set_jog_angle&#40;id, direction, speed&#41;`)

[//]: # ()
[//]: # (- **功能：** 设置点动模式（角度）)

[//]: # (- **参数说明：**)

[//]: # (  - `id`: 代表机械臂的关节，按照关节id给入1~3来表示)

[//]: # (  - `direction`: 主要控制机器臂移动的方向，0 - 正向移动，1 - 负向移动)

[//]: # (  - `speed`: 速度 0 ~ 200 &#40;单位：mm/s&#41;。)

[//]: # (- **返回值：** 无)

[//]: # ()
[//]: # (**3.2** `set_jog_coord&#40;axis, direction, speed&#41;`)

[//]: # ()
[//]: # (- **功能：** 控制机器人按照指定的坐标或姿态值持续移动)

[//]: # (- **参数说明：**)

[//]: # (  - `axis`: 代表机械臂的关节，范围 1 ~ 3)

[//]: # (  - `direction`: 主要控制机器臂移动的方向，0 - 正向移动，1 - 负向移动)

[//]: # (  - `speed`: 速度 0 ~ 200 &#40;单位：mm/s&#41;。)

[//]: # (- **返回值：** 无)

[//]: # ()
[//]: # (**3.3** `set_jog_stop&#40;&#41;`)

[//]: # ()
[//]: # (- **功能：** 停止 jog 控制下的持续移动)

[//]: # (- **返回值：** 无)

[//]: # ()
[//]: # ()
[//]: # ()
[//]: # (## 4 IO控制)

[//]: # ()
[//]: # (**4.1** `set_gpio_state&#40;state&#41;`)

[//]: # ()
[//]: # (- **功能：** 设置 吸泵状态。)

[//]: # (- **参数说明：**)

[//]: # (  - `state` &#40;int&#41;：输入0表示开启吸泵，输入1表示关闭吸泵。)

[//]: # (- **返回值：** 无)

[//]: # ()
[//]: # (**4.2** `set_gripper_zero&#40;&#41;`)

[//]: # ()
[//]: # (- **功能：** 设置夹爪零位（设置当前位置为零位）。)

[//]: # (- **返回值：** 无)

[//]: # ()
[//]: # (**4.3** `set_gripper_state&#40;gripper_value, gripper_speed&#41;:`)

[//]: # ()
[//]: # (- **功能：** 设置夹爪张开位置)

[//]: # (- **参数说明:** )

[//]: # (  - `gripper_value`： `int`, 0 ~ 100。)

[//]: # (  - `gripper_speed:` 0 ~ 1500 RPM/s)

[//]: # (- **返回值：** 无)

[//]: # ()
[//]: # (**4.4** `get_gripper_angle&#40;&#41;:`)

[//]: # ()
[//]: # (- **功能：** 获取夹爪角度)

[//]: # (- **返回值：** 夹爪角度值)

[//]: # ()
[//]: # (## 5 功能接口)

[//]: # ()
[//]: # (**5.1** `play_gcode_file&#40;filename&#41;`)

[//]: # ()
[//]: # (- **功能：** 播放导入的轨迹文件。)

[//]: # (- **参数说明：**)

[//]: # (  - `filename` ：轨迹文件名称)

[//]: # (- **返回值：** 无)


[//]: # (## 6 使用案例)

[//]: # ()
[//]: # (```python)

[//]: # (import time)

[//]: # (import platform)

[//]: # (from pymycobot.ultraArmP340 import ultraArmP340)

[//]: # ()
[//]: # (# 自动选择系统并连接机械臂)

[//]: # (if platform.system&#40;&#41; == "Windows":)

[//]: # (    ua = ultraArmP340&#40;'COM6', 115200&#41;)

[//]: # (    ua.go_zero&#40;&#41;)

[//]: # (elif platform.system&#40;&#41; == "Linux":)

[//]: # (    ua = ultraArmP340&#40;'/dev/ttyUSB0', 115200&#41;)

[//]: # (    ua.go_zero&#40;&#41;)

[//]: # (    )
[//]: # (# 机械臂运动的位置)

[//]: # (angles = [)

[//]: # (    [-81.71, 0.0, 0.0],)

[//]: # (    [-90.53, 21.77, 47.56],)

[//]: # (    [-90.53, 0.0, 0.0],)

[//]: # (    [-59.01, 21.77, 45.84],)

[//]: # (    [-59.01, 0.0, 0.0])

[//]: # (])

[//]: # ()
[//]: # (# 吸取小物块)

[//]: # (ua.set_angles&#40;angles[0], 50&#41;)

[//]: # (time.sleep&#40;3&#41;)

[//]: # (ua.set_angles&#40;angles[1], 50&#41;)

[//]: # (time.sleep&#40;3&#41;)

[//]: # ()
[//]: # (# 开启吸泵)

[//]: # (ua.set_gpio_state&#40;0&#41;)

[//]: # ()
[//]: # (ua.set_angles&#40;angles[2], 50&#41;)

[//]: # (time.sleep&#40;3&#41;)

[//]: # (ua.set_angles&#40;angles[3], 50&#41;)

[//]: # ()
[//]: # (# 关闭吸泵)

[//]: # (ua.set_gpio_state&#40;1&#41;)

[//]: # (time.sleep&#40;3&#41;)

[//]: # ()
[//]: # (ua.set_angles&#40;angles[4], 50&#41;)

[//]: # (```)
